apply plugin: 'java'

repositories {
  mavenCentral()

  maven {
    url "https://oss.sonatype.org/content/repositories/snapshots"
  }
}

configurations {
  provided
    compile.extendsFrom provided
}

dependencies {
  compile 'com.google.guava:guava:18.0'
  compile 'org.pircbotx:pircbotx:2.0.1'
  compile 'org.slf4j:slf4j-simple:1.7.7'
  compile 'org.apache.commons:commons-lang3:3.3.2'
  compile 'commons-codec:commons-codec:1.9'
  compile 'org.yaml:snakeyaml:1.14'
  compile 'mysql:mysql-connector-java:5.1.6'
  compile 'junit:junit:4.12-beta-3'
  compile 'org.apache.commons:commons-math3:3.4.1'
  compile 'com.google.code.gson:gson:2.3.1'
  compile 'net.sf.jwordnet:jwnl:1.4_rc3'
  compile 'org.jsoup:jsoup:1.8.1'
}

sourceCompatibility = 1.7
version = '0.0.9-indev'

jar {
  dependsOn configurations.runtime
  from {
    (configurations.runtime - configurations.provided).collect {
      it.isDirectory() ? it : zipTree(it)
    }
  } {
    exclude "META-INF/*.SF"
    exclude "META-INF/*.DSA"
    exclude "META-INF/*.RSA"
  }
  manifest {
    attributes 'Implementation-Title': 'IRCbutt',
               'Implementation-Version': version,
               'Main-Class': 'net.alureon.ircbutt.Main',
               'Built-By': System.properties['user.name']
  }
}

tasks.withType(JavaCompile) {
  options.compilerArgs += [ '-Xlint:all', '-Xlint:-path' ]
  options.deprecation = true
  options.encoding = 'utf8'
}
